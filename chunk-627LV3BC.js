import{c as L}from"./chunk-YK5JBHKT.js";import{a as V,c as G,f as R,h as U}from"./chunk-7VRA7NH3.js";import{a as Y,b as Z,c as $}from"./chunk-JOMKE55Q.js";import{a as Q}from"./chunk-Y4ZCGVAW.js";import{c as K,d as J}from"./chunk-3TBXM6QS.js";import{a as H,g as W,h as z}from"./chunk-7ITRIRQH.js";import{a as T,b as j}from"./chunk-GZGCU2PU.js";import"./chunk-YWZC5PKM.js";import"./chunk-S3J4NSG4.js";import{a as N}from"./chunk-PE3AIABI.js";import{a as X}from"./chunk-2OGK3DXK.js";import"./chunk-SMOEXM7I.js";import{a as y,b as F}from"./chunk-A3LAJG7R.js";import"./chunk-TDTAES6E.js";import"./chunk-AKCFMZTD.js";import{b as E,d as i,f as P,g as k,h as C,j as m,m as x,n as A,s as O,t as D,u as q}from"./chunk-33HZCSPU.js";import{d as _}from"./chunk-I4WXUBEO.js";import{o as B,q as I}from"./chunk-UKCT2NNU.js";import"./chunk-AESYL7IM.js";import{a as v}from"./chunk-4OTIWHWN.js";import"./chunk-I7KWM6MY.js";import{i as w}from"./chunk-B7NLDW3E.js";import{Ab as t,Bb as e,Cb as s,Jb as b,Va as g,Vb as o,Ya as a,Za as d,cc as S,la as M,qb as c,rb as p}from"./chunk-BEZRA2BD.js";var Ee=(()=>{let u=class u{constructor(n,l,r,h,ee,te){this.title=n,this._snackBar=l,this.auth=r,this.cookieService=h,this.router=ee,this.dialogService=te,this.loginForm=new C({email:new m("",i.compose([i.email,i.required])),password:new m("",i.compose([i.required])),consentimiento:new m(!1,i.requiredTrue)}),this.registroForm=new C({name:new m("",i.compose([i.required,this.noWhitespaceValidator])),email:new m("",i.compose([i.email,i.required])),password:new m("",i.compose([i.required])),password_confirmation:new m("",i.compose([i.required])),consentimiento:new m(!1,i.requiredTrue)}),this.backEndPoint=v.BackEndPoint,this.baseUrl=v.BaseUrl,this.botonDisabled=!1}ngOnInit(){this.title.setTitle("Acceso | EasyShop")}login(){this.dialogService.openSpinner(),this.botonDisabled=!0,this.loginForm.valid?this.auth.loginUser(this.loginForm.value).subscribe({next:n=>{n.token?(this.cookieService.set("TOKEN_C",n.token,1),this.router.navigate(["/mi-cuenta"]),this.dialogService.closeAll()):this.botonDisabled=!1},error:n=>{this.dialogService.closeAll(),this._snackBar.open("Ha ocurrido un error.","Aceptar",{duration:3e3}),this.botonDisabled=!1}}):(this._snackBar.open("El email y/o contrase\xF1a no son v\xE1lidos.","Aceptar",{duration:3e3}),this.botonDisabled=!1)}registro(){this.dialogService.openSpinner(),this.botonDisabled=!0;let n=this.registroForm.value.password??"",l=this.registroForm.value.password_confirmation??"";this.registroForm.valid&&n===l?this.auth.registroUser(this.registroForm.value).subscribe({next:r=>{this.dialogService.closeAll(),this._snackBar.open("Se ha creado el usuario. Por favor, revise su email.","Aceptar",{duration:5e3}),this.botonDisabled=!1},error:r=>{this.dialogService.closeAll(),this._snackBar.open("No se ha podido procesar su solicitud.","Aceptar",{duration:3e3}),this.botonDisabled=!1}}):this.registroForm.valid&&n!==l?(this.dialogService.closeAll(),this._snackBar.open("Ambos campos de contrase\xF1a deben coincidir.","Aceptar",{duration:3e3}),this.botonDisabled=!1):(this.dialogService.closeAll(),this._snackBar.open("Se ha producido un error.","Aceptar",{duration:3e3}),this.botonDisabled=!1)}noWhitespaceValidator(n){return!((n.value||"").trim().length===0)?null:{whitespace:!0}}};u.\u0275fac=function(l){return new(l||u)(d(w),d(N),d(y),d(F),d(_),d(X))},u.\u0275cmp=M({type:u,selectors:[["app-accesocliente"]],standalone:!0,features:[S],decls:60,vars:18,consts:[[1,"acceso-cliente"],[1,"text-center"],[1,"tabs"],["mat-stretch-tabs","false","mat-align-tabs","center","dynamicHeight","true"],["label","Acceder"],[1,"login-card"],["ngNativeValidate","",3,"submit","formGroup"],[1,"email-input","form-field"],["type","email","matInput","","formControlName","email","required",""],[1,"password-input","form-field"],["type","password","matInput","","formControlName","password","required",""],["formControlName","consentimiento",1,"checkbox"],["type","submit","mat-flat-button","",1,"acceder",3,"disabled"],["label","Registrarse"],[1,"name-input","form-field"],["type","text","matInput","","formControlName","name","required",""],["type","password","matInput","","formControlName","password_confirmation","required",""],["type","submit","mat-flat-button","",1,"registro",3,"disabled"],[1,"links"],[3,"href"],["href",""],[1,"politica"]],template:function(l,r){l&1&&(s(0,"app-header"),t(1,"main")(2,"section",0)(3,"h1",1),o(4,"Mi cuenta"),e(),t(5,"div",2)(6,"mat-tab-group",3)(7,"mat-tab",4)(8,"mat-card",5)(9,"form",6),b("submit",function(){return r.login()}),t(10,"mat-card-content")(11,"mat-form-field",7)(12,"mat-label"),o(13,"Correo electr\xF3nico: "),e(),s(14,"input",8),e(),t(15,"mat-form-field",9)(16,"mat-label"),o(17,"Contrase\xF1a: "),e(),s(18,"input",10),e()(),t(19,"mat-card-footer")(20,"mat-checkbox",11),o(21,"Acepto la pol\xEDtica de privacidad."),e(),t(22,"button",12),o(23,"Acceder"),e()()()()(),t(24,"mat-tab",13)(25,"mat-card",5)(26,"form",6),b("submit",function(){return r.registro()}),t(27,"mat-card-content")(28,"mat-form-field",14)(29,"mat-label"),o(30,"Nombre: "),e(),s(31,"input",15),e(),t(32,"mat-form-field",7)(33,"mat-label"),o(34,"Correo electr\xF3nico: "),e(),s(35,"input",8),e(),t(36,"mat-form-field",9)(37,"mat-label"),o(38,"Contrase\xF1a: "),e(),s(39,"input",10),e(),t(40,"mat-form-field",9)(41,"mat-label"),o(42,"Repetir Contrase\xF1a: "),e(),s(43,"input",16),e()(),t(44,"mat-card-footer")(45,"mat-checkbox",11),o(46,"Acepto la pol\xEDtica de privacidad."),e(),t(47,"button",17),o(48,"Registrarse"),e()()()()()()(),t(49,"div",18)(50,"p")(51,"a",19),o(52,"\xBFHas olvidado tu contrase\xF1a?"),e()(),t(53,"p")(54,"a",20),o(55,"\u2190 Volver a EasyShop"),e()()(),t(56,"div",21)(57,"a",19),o(58,"Pol\xEDtica de privacidad"),e()()()(),s(59,"app-footer")),l&2&&(a(9),c("formGroup",r.loginForm),a(2),p("width",100,"%"),a(4),p("width",100,"%"),a(7),c("disabled",!r.loginForm.valid),a(4),c("formGroup",r.registroForm),a(2),p("width",100,"%"),a(4),p("width",100,"%"),a(4),p("width",100,"%"),a(4),p("width",100,"%"),a(7),c("disabled",!r.registroForm.valid||r.botonDisabled),a(4),c("href",r.backEndPoint+"/forgot-password",g),a(6),c("href",r.baseUrl+"/politica-de-privacidad",g))},dependencies:[T,j,$,Y,Z,z,W,H,J,K,U,V,G,R,L,Q,I,B,q,E,P,k,O,x,A,D],styles:[".acceso-cliente[_ngcontent-%COMP%]{margin:0 auto}.login-card[_ngcontent-%COMP%]{padding:1rem}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{justify-content:center}.login-card[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}button.acceder[_ngcontent-%COMP%], button.registro[_ngcontent-%COMP%]{width:30%;margin:1em 1rem 1rem 2rem;text-align:center;color:var(--white);background-color:var(--darkblue)}.links[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:left;gap:2rem;margin:2rem}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--black)}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--darkblue)}.politica[_ngcontent-%COMP%]{text-align:center;margin:3rem 0}.politica[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--darkblue)}@media only screen and (min-width: 1367px){.acceso-cliente[_ngcontent-%COMP%]{width:30%;padding:5rem 0}}@media only screen and (max-width: 767px){.acceso-cliente[_ngcontent-%COMP%]{width:100%;padding:2rem 1rem}}@media only screen and (min-width: 768px) and (max-width: 1366px){.acceso-cliente[_ngcontent-%COMP%]{width:50%;padding:3rem 0}}"]});let f=u;return f})();export{Ee as AccesoclienteComponent};
