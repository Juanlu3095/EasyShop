import{c as T,d as q}from"./chunk-3TBXM6QS.js";import{a as H,g as P,h as V}from"./chunk-7ITRIRQH.js";import{a as O}from"./chunk-PE3AIABI.js";import{b as k,d as n,f as x,g as E,h as y,j as I,k as _,m as w,n as N,s as $,u as B}from"./chunk-33HZCSPU.js";import{o as D,q as G}from"./chunk-UKCT2NNU.js";import"./chunk-AESYL7IM.js";import"./chunk-I7KWM6MY.js";import{c as M,i as S,k as F,l as C}from"./chunk-5XYOWQFX.js";import{Ab as o,Bb as a,Cb as c,Jb as b,Vb as s,Ya as g,Z as h,Za as u,aa as f,cc as A,fa as l,i as d,la as j,qb as v,t as p}from"./chunk-BEZRA2BD.js";var z=(()=>{let e=class e{constructor(t,i){this.http=t,this.headersService=i,this._refresh$=new d,this.endpoint=F.ApiEndpoint}get refresh$(){return this._refresh$}getAjustes(){return this.http.get(`${this.endpoint}/ajustes`,this.headersService.createHeadersAdmin())}getAjuste(t){return this.http.post(`${this.endpoint}/ajuste`,{ajuste:t},this.headersService.createHeadersAdmin()).pipe(p(i=>i.data))}updateAjuste(t,i){return this.http.put(`${this.endpoint}/ajustes/${t}`,i,this.headersService.createHeadersAdmin()).pipe(h(()=>{this.refresh$.next()}))}};e.\u0275fac=function(i){return new(i||e)(l(M),l(C))},e.\u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var nt=(()=>{let e=class e{constructor(t,i,m){this.ajusteService=t,this.title=i,this._snackBar=m,this.emailForm=new y({ajuste:new I("",n.compose([n.email,n.required,n.min(1)]))})}ngOnInit(){this.title.setTitle("Ajustes < EasyShop"),this.getAjuste()}updateEmail(){this.emailForm.valid&&this.ajusteService.updateAjuste(this.email.id,this.emailForm.value).subscribe({next:t=>{this._snackBar.open("Email actualizado.","Aceptar",{duration:3e3})},error:t=>{this._snackBar.open("No se ha podido actualizar el email.","Aceptar",{duration:3e3})}})}getAjustes(){this.ajusteService.getAjustes().subscribe({next:t=>{console.log(t),this.ajustes=t.data},error:t=>{console.error(t)}})}getAjuste(){this.ajusteService.getAjuste("email").subscribe({next:t=>{console.log(t),this.email=t,this.emailForm.patchValue({ajuste:this.email.valor})},error:t=>{this._snackBar.open("No se ha podido obtener los datos.","Aceptar",{duration:3e3})}})}};e.\u0275fac=function(i){return new(i||e)(u(z),u(S),u(O))},e.\u0275cmp=j({type:e,selectors:[["app-dashboardajustes"]],standalone:!0,features:[A],decls:17,vars:1,consts:[[1,"encabezado-ajustes"],[1,"lista-ajustes"],[1,"ajuste"],[3,"formGroup"],[1,"input-ajustes"],["matInput","","type","email","formControlName","ajuste","ngDefaultControl","","required",""],["mat-flat-button","",3,"click"]],template:function(i,m){i&1&&(o(0,"main")(1,"section")(2,"div",0)(3,"h1"),s(4,"Ajustes"),a()()(),c(5,"br"),o(6,"section",1)(7,"div",2)(8,"h3"),s(9,"Email"),a(),o(10,"form",3)(11,"mat-form-field",4)(12,"mat-label"),s(13,"Email"),a(),c(14,"input",5),a(),o(15,"button",6),b("click",function(){return m.updateEmail()}),s(16,"Guardar cambios"),a()()()()()),i&2&&(g(10),v("formGroup",m.emailForm))},dependencies:[G,D,V,P,H,q,T,B,_,k,x,E,$,w,N],styles:[".ajuste[_ngcontent-%COMP%]{padding:1rem 1rem 0;margin-bottom:1rem;border:1px solid lightgray;background-color:#fff;width:50%}@media screen and (max-width: 1023px){.ajuste[_ngcontent-%COMP%]{width:100%}}.ajuste[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 1rem;background-color:var(--darkblue);color:#fff}.input-ajustes[_ngcontent-%COMP%]{width:100%}"]});let r=e;return r})();export{nt as DashboardajustesComponent};
