import{a as X}from"./chunk-IEASDS4O.js";import{a as W}from"./chunk-42JTQIQS.js";import"./chunk-BJKW2MZI.js";import"./chunk-5V7AZGGS.js";import"./chunk-JI4B56LL.js";import"./chunk-Y4ZCGVAW.js";import{c as $,d as K}from"./chunk-3TBXM6QS.js";import{a as j,g as L,h as J}from"./chunk-7ITRIRQH.js";import{a as H}from"./chunk-PE3AIABI.js";import{a as U}from"./chunk-2OGK3DXK.js";import"./chunk-SMOEXM7I.js";import{b as I,d as a,f as A,g as V,h as x,j as M,k as Q,l as R,m as T,n as O,s as P,u as G}from"./chunk-33HZCSPU.js";import{o as z,q as B}from"./chunk-UKCT2NNU.js";import"./chunk-AESYL7IM.js";import"./chunk-YRYHB4P2.js";import"./chunk-I7KWM6MY.js";import{i as q}from"./chunk-X2X7HICG.js";import{Ab as s,Bb as r,Cb as u,Gb as w,Jb as y,Lb as g,Rb as h,Sb as b,Tb as f,Vb as l,Xb as N,Ya as p,Za as v,cc as k,jc as E,la as F,ob as D,qb as S,ua as _,va as C}from"./chunk-BEZRA2BD.js";var Z=["contentNuevo"],ee=["contentEditar"],oe=["contentEliminar"],te=["contentEliminarSeleccion"];function ie(i,d){if(i&1&&(s(0,"div")(1,"form",7)(2,"mat-form-field",8)(3,"mat-label"),l(4,"Nombre"),r(),u(5,"input",9),r(),s(6,"mat-form-field",8)(7,"mat-label"),l(8,"Precio"),r(),u(9,"input",10),r()()()),i&2){let c=g();p(),S("formGroup",c.nuevoMetodoenvioForm)}}function ne(i,d){if(i&1&&(s(0,"div")(1,"form",7)(2,"mat-form-field",8)(3,"mat-label"),l(4,"Nombre"),r(),u(5,"input",9),r(),s(6,"mat-form-field",8)(7,"mat-label"),l(8,"Precio"),r(),u(9,"input",10),r()()()),i&2){let c=g();p(),S("formGroup",c.editarMetodoenvioForm)}}function re(i,d){if(i&1&&(s(0,"div"),l(1),r()),i&2){let c=g();p(),N(' \xBFEst\xE1s seguro de querer eliminar el m\xE9todo de env\xEDo "',c.metodoenvio==null?null:c.metodoenvio.Nombre,'"? ')}}function ae(i,d){i&1&&(s(0,"div"),l(1," \xBFEst\xE1s seguro de querer los m\xE9todos de env\xEDo seleccionados? "),u(2,"br"),s(3,"span",11),l(4," \xA1OJO! Si has pulsado el bot\xF3n para seleccionar todo, se eliminar\xE1n todos los m\xE9todos de env\xEDo, incluidos aquellos que no aparezcan en la vista actual. "),r()())}var ge=(()=>{let d=class d{constructor(t,n,o,e){this.title=t,this.metodoEnvioService=n,this.dialogService=o,this._matSnackbar=e,this.columns=["Id","Nombre","Precio"],this.displayedColumns=["select",...this.columns,"acciones"],this.selectedIds=[],this.botones=[{id:1,nombre:"Editar",class:"",accion:m=>this.editarMetodoenvio(m)},{id:2,nombre:"Eliminar",class:"danger",accion:m=>this.eliminarMetodoenvio(m)}],this.nuevoMetodoenvioForm=new x({nombre:new M("",a.compose([a.required,a.minLength(1)])),precio:new M(0,a.compose([a.required,a.min(0)]))}),this.editarMetodoenvioForm=new x({nombre:new M("",a.compose([a.required,a.minLength(1)])),precio:new M(0,a.compose([a.required,a.min(0)]))})}ngOnInit(){this.title.setTitle("M\xE9todos de env\xEDo < EasyShop"),this.getMetodosenvio(),this.suscripcion=this.metodoEnvioService.refresh$.subscribe(()=>{this.getMetodosenvio()})}ngOnDestroy(){this.suscripcion.unsubscribe()}nuevoMetodoenvio(){this.dialogService.openDialog(this.modalNuevo,"A\xF1adir m\xE9todo de env\xEDo","guardar").then(o=>{o&&this.nuevoMetodoenvioForm.valid&&this.metodoEnvioService.postMetodoenvio(this.nuevoMetodoenvioForm.value).subscribe({next:e=>{this._matSnackbar.open("M\xE9todo de env\xEDo creado.","Aceptar",{duration:3e3})},error:e=>{this._matSnackbar.open("Ha ocurrido un error.","Aceptar",{duration:3e3})}})})}editarMetodoenvio(t){let n="Editar m\xE9todo de env\xEDo",o="guardar";this.metodoEnvioService.getMetodoenvio(t).subscribe({next:e=>{this.metodoenvio=e.data,this.editarMetodoenvioForm.patchValue({nombre:this.metodoenvio?.Nombre,precio:this.metodoenvio?.Precio})},error:e=>{this._matSnackbar.open("Ha ocurrido un error.","Aceptar",{duration:3e3})}}),this.dialogService.openDialog(this.modalEditar,n,o).then(e=>{e&&this.editarMetodoenvioForm.valid&&this.metodoEnvioService.updateMetodoenvio(t,this.editarMetodoenvioForm.value).subscribe({next:m=>{this._matSnackbar.open("M\xE9todo de env\xEDo actualizado.","Aceptar",{duration:3e3})},error:m=>{this._matSnackbar.open("Ha ocurrido un error.","Aceptar",{duration:3e3})}})})}eliminarMetodoenvio(t){this.metodoenvio=this.metodosenvio.find(e=>e.Id===t)??null,this.dialogService.openDialog(this.modalEliminar,"Eliminar m\xE9todo de env\xEDo","aceptar").then(e=>{e&&this.metodoEnvioService.deleteMetodoenvio(t).subscribe({next:m=>{this._matSnackbar.open("M\xE9todo de env\xEDo eliminado.","Aceptar",{duration:3e3})},error:m=>{this._matSnackbar.open("Ha ocurrido un error.","Aceptar",{duration:3e3})}})})}onSelectionChange(t){this.selectedIds=t}eliminarSeleccionMetodoenvio(){this.dialogService.openDialog(this.modalEliminarSeleccion,"Eliminar m\xE9todos de env\xEDo seleccionados","aceptar").then(o=>{o&&this.metodoEnvioService.deleteMetodoenvio(this.selectedIds).subscribe({next:e=>{this._matSnackbar.open("M\xE9todos de env\xEDo eliminados.","Aceptar",{duration:3e3})},error:e=>{this._matSnackbar.open("Ha ocurrido un error.","Aceptar",{duration:3e3})}})})}getMetodosenvio(){this.metodoEnvioService.getMetodosenvio().subscribe({next:t=>{this.metodosenvio=t.data},error:t=>{console.error(t)}})}};d.\u0275fac=function(n){return new(n||d)(v(q),v(X),v(U),v(H))},d.\u0275cmp=F({type:d,selectors:[["app-dashboardmetodosenvio"]],viewQuery:function(n,o){if(n&1&&(h(Z,5),h(ee,5),h(oe,5),h(te,5)),n&2){let e;b(e=f())&&(o.modalNuevo=e.first),b(e=f())&&(o.modalEditar=e.first),b(e=f())&&(o.modalEliminar=e.first),b(e=f())&&(o.modalEliminarSeleccion=e.first)}},standalone:!0,features:[k],decls:16,vars:5,consts:[["contentNuevo",""],["contentEditar",""],["contentEliminar",""],["contentEliminarSeleccion",""],[1,"encabezado-metodosenvio"],["mat-stroked-button","",3,"click"],[3,"selectionChange","columns","displayedColumns","data","buttons","eliminarSeleccionados"],[3,"formGroup"],[1,"form-field"],["matInput","","required","","type","text","formControlName","nombre"],["matInput","","required","","type","number","formControlName","precio"],[1,"caution"]],template:function(n,o){if(n&1){let e=w();s(0,"main")(1,"section")(2,"div",4)(3,"h1"),l(4,"M\xE9todos de env\xEDo"),r(),s(5,"button",5),y("click",function(){return _(e),C(o.nuevoMetodoenvio())}),l(6,"A\xF1adir m\xE9todo de env\xEDo"),r()(),s(7,"app-tablacompleta",6),y("selectionChange",function(Y){return _(e),C(o.onSelectionChange(Y))}),r()()(),D(8,ie,10,1,"ng-template",null,0,E)(10,ne,10,1,"ng-template",null,1,E)(12,re,2,1,"ng-template",null,2,E)(14,ae,5,0,"ng-template",null,3,E)}n&2&&(p(7),S("columns",o.columns)("displayedColumns",o.displayedColumns)("data",o.metodosenvio)("buttons",o.botones)("eliminarSeleccionados",o.eliminarSeleccionMetodoenvio.bind(o)))},dependencies:[W,B,z,J,L,j,K,$,G,Q,I,R,A,V,P,T,O],styles:[".encabezado-metodosenvio[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.encabezado-metodosenvio[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:var(--darkblue)}.caution[_ngcontent-%COMP%]{color:red}.form-field[_ngcontent-%COMP%]{width:100%}"]});let i=d;return i})();export{ge as DashboardmetodosenvioComponent};
