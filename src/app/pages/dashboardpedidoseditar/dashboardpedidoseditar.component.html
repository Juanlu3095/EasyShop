<main>

    <section class="encabezado-pedido">
        
        <h1>Editar pedido @if(pedido) { #{{ pedido.Id }} }</h1>
        <a href="dashboard/pedidos">← Volver a la página anterior</a>
    </section>

    <br><br>

    @if(pedido) {
        <form [formGroup]="editarpedidoForm">
            <div class="pedido-data">
                
                <section class="pedido-data-item-izqa">
                    
                    <div class="input-border">
                        <h2>Datos del cliente</h2>

                        <mat-form-field class="example-full-width">
                            <mat-label>Nombre</mat-label>
                            <input matInput required type="text" formControlName="nombre">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Apellidos</mat-label>
                            <input matInput required type="text" formControlName="apellidos">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>País</mat-label>
                            <input matInput required type="text" formControlName="pais">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Dirección</mat-label>
                            <input matInput required type="text" formControlName="direccion">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Código postal</mat-label>
                            <input matInput required type="number" formControlName="codigo_postal">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Población</mat-label>
                            <input matInput required type="text" formControlName="poblacion">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Provincia</mat-label>
                            <input matInput required type="text" formControlName="provincia">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Teléfono</mat-label>
                            <input matInput required type="number" formControlName="telefono">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Email</mat-label>
                            <input matInput required type="email" formControlName="email">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Notas</mat-label>
                            <textarea matInput formControlName="notas"
                            cdkTextareaAutosize
                            #autosize="cdkTextareaAutosize"
                            cdkAutosizeMinRows="5"
                            cdkAutosizeMaxRows="10"></textarea>
                        </mat-form-field>
                    </div>

                </section>

                <aside class="pedido-data-item-dcha">
                    
                    <div class="input-border">
                        <h2>Datos del pedido</h2>

                        <mat-form-field class="example-full-width">
                            <mat-label>Cuenta del cliente</mat-label>
                            <mat-select formControlName="cuenta_cliente" ngDefaultControl>
                                @for(usuario of usuarios; track usuario.Id) {
                                    <mat-option value="{{ usuario.Id }}"> #{{ usuario.Id }} - {{ usuario.Nombre }}</mat-option>
                                }    
                            </mat-select>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Método de pago</mat-label>
                            <mat-select required formControlName="metodo_pago" ngDefaultControl>
                                @for(metodopago of metodospago; track metodopago.slug) {
                                    <mat-option value="{{ metodopago.slug }}">{{ metodopago.nombre }}</mat-option>
                                }    
                            </mat-select>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Estado</mat-label>
                            <mat-select required formControlName="estado" ngDefaultControl>
                                @for(estado of estadospedido; track estado.id) {
                                    <mat-option value="{{ estado.id }}">{{ estado.valor }}</mat-option>
                                }    
                            </mat-select>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Nombre descuento</mat-label>
                            <input matInput type="text" formControlName="nombre_descuento">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Tipo de descuento</mat-label>
                            <mat-select formControlName="tipo_descuento" ngDefaultControl>
                                <mat-option value="Fijo">Fijo</mat-option>
                                <mat-option value="Porcentual">Porcentual</mat-option>
                            </mat-select>
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <mat-label>Descuento</mat-label>
                            <input matInput type="number" formControlName="descuento">
                        </mat-form-field>

                        <button mat-flat-button>Guardar</button>
                    </div>
                </aside>
            </div>

            <br><br>
            <div class="pedido-data-otros">
                <h2>Productos del pedido</h2>

                <app-tablacompleta></app-tablacompleta>
            </div>
            
        </form>
    }

</main>