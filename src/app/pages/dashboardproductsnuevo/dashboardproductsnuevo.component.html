<main>
    <section class="encabezado-productonuevo">
        <h1>Añadir producto</h1>
        <a href="dashboard/productos">← Volver a la página anterior</a>
    </section>

    <br><br>

    <form [formGroup]="nuevoproductoForm">
        <div class="product-data">
            <section class="product-data-izq">

                <div class="input-border">
                    <mat-form-field class="example-full-width">
                        <mat-label>Nombre del producto</mat-label>
                        <input matInput type="text" formControlName="nombre">
                    </mat-form-field>
                </div>

                <div class="input-border">
                    <mat-form-field class="example-full-width">
                        <mat-label>Descripción del producto</mat-label>
                        <textarea matInput formControlName="descripcion"
                        cdkTextareaAutosize
                        #autosize="cdkTextareaAutosize"
                        cdkAutosizeMinRows="10"
                        cdkAutosizeMaxRows="10"></textarea>
                    </mat-form-field>
                </div>
                

                <div class="input-border">

                    <h2>Datos del producto</h2>

                    <div class="input-group-flex">
                        <mat-form-field class="example-full-width">
                            <mat-label>Precio</mat-label>
                            <input matInput type="number" formControlName="precio">
                        </mat-form-field>
        
                        <mat-form-field class="example-full-width">
                            <mat-label>Precio rebajado (si procede)</mat-label>
                            <input matInput type="number" formControlName="precio_rebajado">
                        </mat-form-field>
                    </div>
                    
                    <div class="input-group-flex">
                        <mat-form-field class="example-full-width">
                            <mat-label>SKU</mat-label>
                            <input matInput type="text" formControlName="sku">
                        </mat-form-field>
    
                        <mat-form-field class="example-full-width">
                            <mat-label>ISBN/EAN</mat-label>
                            <input matInput type="text" formControlName="isbn_ean">
                        </mat-form-field>
                    </div>

                    <mat-form-field class="example-full-width">
                        <mat-label>Inventario</mat-label>
                        <input matInput type="number" formControlName="inventario">
                    </mat-form-field>
                    
                </div>
                
                <div class="input-border">
                    <mat-form-field class="example-full-width">
                        <mat-label>Descripción corta del producto</mat-label>
                        <textarea matInput formControlName="descripcion_corta"
                        cdkTextareaAutosize
                        #autosize="cdkTextareaAutosize"
                        cdkAutosizeMinRows="5"
                        cdkAutosizeMaxRows="10"></textarea>
                    </mat-form-field>
                </div>
                
            </section>
            
            <aside class="product-data-dcha">

                <div class="input-border">
                    <div>
                        <mat-form-field class="example-full-width">
                            <mat-label>Estado del producto</mat-label>
                            <mat-select required formControlName="estado" ngDefaultControl>
                                <mat-option value="publicada">Publicada</mat-option>
                                <mat-option value="borrador">Borrador</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="guardar">
                        <button mat-flat-button type="submit" (click)="crearProducto()">Guardar</button>
                    </div>
                    
                </div>

                <div class="input-border">
                    <h2>Imagen del producto</h2>
                    
                    <div class="image-container">
                        @if(imagenSeleccionada()) {
                            <img src="{{ archivoEndpoint + imagenElegida.ruta}}" class="imagenSeleccionada">
                        }
                        <br>
                        <button mat-flat-button class="select-image" (click)="openDialogSeleccionarImagen()">Seleccionar imagen</button>
                        
                        
                    </div>
                    
                </div>

                <div class="input-border">
                    <h2>Categoría y marca</h2>
                    <mat-form-field class="example-full-width">
                        <mat-label>Categoría</mat-label>
                        <mat-select required formControlName="categoria_id" ngDefaultControl>
                            @if (categorias) {
                                @for (categoria of categorias; track categoria.Id) {
                                    <mat-option [value]="categoria.Id">{{ categoria.Nombre }}</mat-option>
                                }
                            }
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field class="example-full-width">
                        <mat-label>Marca</mat-label>
                        <mat-select required formControlName="marca_id" ngDefaultControl>
                            @if (marcas) {
                                @for (marca of marcas; track marca.Id) {
                                    <mat-option [value]="marca.Id">{{ marca.Nombre }}</mat-option>
                                }
                            }
                        </mat-select>
                    </mat-form-field>
                </div>
                
            </aside>
        </div>
    </form>
    
</main>
