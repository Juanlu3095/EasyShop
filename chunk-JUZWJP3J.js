import{a as _}from"./chunk-XA7ZFMLR.js";import{a as Ie}from"./chunk-34JUEJJQ.js";import{c as Ee}from"./chunk-YK5JBHKT.js";import{a as ue,b as fe,c as ve,e as Ce,h as ge}from"./chunk-7VRA7NH3.js";import{a as De}from"./chunk-JXWWU5P2.js";import"./chunk-BJKW2MZI.js";import"./chunk-5V7AZGGS.js";import{a as Se,b as Me}from"./chunk-JI4B56LL.js";import"./chunk-Y4ZCGVAW.js";import{c as be,d as N}from"./chunk-3TBXM6QS.js";import{a as he,g as xe,h as k}from"./chunk-7ITRIRQH.js";import{a as y}from"./chunk-PE3AIABI.js";import{b as w,c as _e,d as F,e as V,f as T,g as P,h as b}from"./chunk-SMOEXM7I.js";import{b as ie,d as f,f as oe,g as ne,h as ae,j as g,k as re,l as le,m as me,n as de,s as ce,t as se,u as pe}from"./chunk-33HZCSPU.js";import{b as Y,d as Z}from"./chunk-Q4OLKBFG.js";import{o as I,q as O}from"./chunk-UKCT2NNU.js";import"./chunk-AESYL7IM.js";import"./chunk-YRYHB4P2.js";import{Z as te}from"./chunk-I7KWM6MY.js";import{i as X,k as ee}from"./chunk-5XYOWQFX.js";import{Ab as t,Bb as e,Cb as s,Dc as Q,Gb as D,Jb as x,Kc as U,Lb as p,Mc as W,Vb as i,Wb as u,Xb as R,Ya as d,Yb as $,Za as c,bc as z,cc as E,ga as L,gc as H,ic as J,la as h,ob as v,pc as K,qb as q,ua as S,va as M,vb as C}from"./chunk-BEZRA2BD.js";function Pe(a,r){if(a&1&&(t(0,"form",2)(1,"mat-form-field",6)(2,"mat-label"),i(3,"Nombre"),e(),s(4,"input",7),e(),t(5,"mat-form-field",6)(6,"mat-label"),i(7,"Apellidos"),e(),s(8,"input",8),e(),t(9,"mat-form-field",6)(10,"mat-label"),i(11,"Email"),e(),s(12,"input",9),e(),t(13,"mat-form-field",6)(14,"mat-label"),i(15,"Tel\xE9fono"),e(),s(16,"input",10),e(),t(17,"mat-form-field",6)(18,"mat-label"),i(19,"Pa\xEDs"),e(),s(20,"input",11),e(),t(21,"mat-form-field",6)(22,"mat-label"),i(23,"Ciudad"),e(),s(24,"input",12),e(),t(25,"mat-form-field",6)(26,"mat-label"),i(27,"Incorporaci\xF3n"),e(),t(28,"mat-select",13)(29,"mat-option",14),i(30,"Inmediatamente"),e(),t(31,"mat-option",15),i(32,"15 d\xEDas"),e(),t(33,"mat-option",16),i(34,"30 d\xEDas"),e()()(),t(35,"mat-form-field",6)(36,"mat-label"),i(37,"Estado candidatura"),e(),t(38,"mat-select",17)(39,"mat-option",18),i(40,"En proceso"),e(),t(41,"mat-option",19),i(42,"Visto"),e(),t(43,"mat-option",20),i(44,"Seleccionado"),e(),t(45,"mat-option",21),i(46,"Descartado"),e()()()()),a&2){let l=p();q("formGroup",l.editarCvForm)}}function Ae(a,r){a&1&&(t(0,"p"),i(1,"El CV al que trata de acceder no existe."),e())}var Fe=(()=>{let r=class r{constructor(n,o,m){this.data=n,this.ofertaservice=o,this._snackBar=m,this.editarCvForm=new ae({nombre:new g("",f.required),apellidos:new g("",f.required),email:new g("",f.compose([f.email,f.required])),telefono:new g("",f.required),pais:new g("",f.required),ciudad:new g("",f.required),incorporacion:new g("",f.required),estado_candidatura:new g("",f.required)})}ngOnInit(){this.getCv(this.data.id)}getCv(n){this.ofertaservice.getCv(n).subscribe({next:o=>{this.cv=o,this.editarCvForm.patchValue({nombre:this.cv.Nombre,apellidos:this.cv.Apellidos,email:this.cv.Email,telefono:this.cv.Tel\u00E9fono,pais:this.cv.Pa\u00EDs,ciudad:this.cv.Ciudad,incorporacion:this.cv.Incorporaci\u00F3n,estado_candidatura:this.cv.Candidatura})},error:o=>{console.error(o)}})}editarCv(){this.ofertaservice.updateCv(this.data.id,this.editarCvForm.value).subscribe({next:n=>{console.log("Form:",this.editarCvForm),this._snackBar.open("CV editado.","Aceptar",{duration:3e3})},error:n=>{console.error("Ha ocurrido un error:",n)}})}};r.\u0275fac=function(o){return new(o||r)(c(w),c(_),c(y))},r.\u0275cmp=h({type:r,selectors:[["app-dasheditarcv"]],standalone:!0,features:[E],decls:10,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"example-form",3,"formGroup"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"click","mat-dialog-close"],[1,"example-full-width"],["type","text","matInput","","placeholder","","formControlName","nombre","ngDefaultControl","","required",""],["type","text","matInput","","placeholder","","formControlName","apellidos","ngDefaultControl","","required",""],["type","email","matInput","","placeholder","","formControlName","email","ngDefaultControl","","required",""],["type","number","matInput","","placeholder","","formControlName","telefono","ngDefaultControl","","required",""],["type","text","matInput","","placeholder","","formControlName","pais","ngDefaultControl","","required",""],["type","ciudad","matInput","","placeholder","","formControlName","apellidos","ngDefaultControl","","required",""],["required","","formControlName","incorporacion","ngDefaultControl",""],["value","Inmediatamente"],["value","15 dias"],["value","30 dias"],["required","","formControlName","estado_candidatura","ngDefaultControl",""],["value","En proceso"],["value","Visto"],["value","Seleccionado"],["value","Descartado"]],template:function(o,m){o&1&&(t(0,"h2",0),i(1,"Editar CV"),e(),t(2,"mat-dialog-content",1),v(3,Pe,47,1,"form",2)(4,Ae,2,0),e(),t(5,"mat-dialog-actions",3)(6,"button",4),i(7,"Cancelar"),e(),t(8,"button",5),x("click",function(){return m.editarCv()}),i(9,"Guardar"),e()()),o&2&&(d(3),C(3,m.cv?3:4),d(5),q("mat-dialog-close",!0))},dependencies:[b,F,V,P,T,O,I,k,xe,he,Ee,N,be,Me,Se,te,se,re,ie,le,oe,ne,ce,pe,me,de],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]});let a=r;return a})();function qe(a,r){if(a&1){let l=D();t(0,"mat-dialog-content"),i(1),e(),t(2,"mat-dialog-actions",1)(3,"button",2),i(4,"No"),e(),t(5,"button",3),x("click",function(){S(l);let o=p();return M(o.eliminarCv())}),i(6,"S\xED"),e()()}if(a&2){let l=p();d(),$(" \xBFEst\xE1s seguro de que quieres eliminar el CV de ",l.cv.Nombre," ",l.cv.Apellidos,"? ")}}function ke(a,r){a&1&&(t(0,"mat-dialog-content")(1,"p"),i(2,"Cargando CV..."),e()())}var Ve=(()=>{let r=class r{constructor(n,o,m){this.data=n,this.ofertaempleoService=o,this._snackBar=m}ngOnInit(){this.data.id&&(console.log(this.data.id),this.getCv(this.data.id))}getCv(n){this.ofertaempleoService.getCv(n).subscribe({next:o=>{this.cv=o},error:o=>{console.error(o)}})}eliminarCv(){this.ofertaempleoService.deleteCv(this.data.id).subscribe({next:n=>{this._snackBar.open("CV eliminado.","Aceptar",{duration:3e3}),console.log(n)},error:n=>{console.error("Ha ocurrido un error:",n)}})}};r.\u0275fac=function(o){return new(o||r)(c(w),c(_),c(y))},r.\u0275cmp=h({type:r,selectors:[["app-dasheliminarcv"]],standalone:!0,features:[E],decls:4,vars:1,consts:[["mat-dialog-title",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close","","cdkFocusInitial","",1,"aceptar",3,"click"]],template:function(o,m){o&1&&(t(0,"h2",0),i(1,"Eliminar CV"),e(),v(2,qe,7,2)(3,ke,3,0)),o&2&&(d(2),C(2,m.cv?2:3))},dependencies:[b,F,V,P,T,O,I],styles:[".aceptar[_ngcontent-%COMP%]{background-color:red;color:var(--white)}"]});let a=r;return a})();function Ne(a,r){if(a&1){let l=D();t(0,"mat-dialog-content"),i(1," \xBFEst\xE1s seguro de que quieres eliminar los CVs seleccionados? "),s(2,"br"),t(3,"span",1),i(4,"\xA1OJO! Si has pulsado el bot\xF3n para seleccionar todo, se eliminar\xE1n todos los CVs, incluidos aquellos que no aparezcan en la vista actual."),e()(),t(5,"mat-dialog-actions",2)(6,"button",3),i(7,"No"),e(),t(8,"button",4),x("click",function(){S(l);let o=p();return M(o.eliminarSeleccionados())}),i(9,"S\xED"),e()()}}function je(a,r){a&1&&(t(0,"mat-dialog-content"),i(1," No hay registros seleccionados. "),s(2,"br"),e(),t(3,"mat-dialog-actions",2)(4,"button",3),i(5,"Aceptar"),e()())}var Te=(()=>{let r=class r{constructor(n,o,m){this.data=n,this.ofertaempleoService=o,this._snackBar=m}ngOnInit(){console.log(this.data.ids)}eliminarSeleccionados(){this.ofertaempleoService.deleteCv(this.data.ids).subscribe({next:n=>{console.log(n),this._snackBar.open("CVs eliminados.","Aceptar",{duration:3e3})},error:n=>{console.error(n)}})}};r.\u0275fac=function(o){return new(o||r)(c(w),c(_),c(y))},r.\u0275cmp=h({type:r,selectors:[["app-dasheliminarseleccioncv"]],standalone:!0,features:[E],decls:4,vars:1,consts:[["mat-dialog-title",""],[1,"caution"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-dialog-close","","cdkFocusInitial","",1,"aceptar",3,"click"]],template:function(o,m){o&1&&(t(0,"h2",0),i(1,"Eliminar CVs seleccionados"),e(),v(2,Ne,10,0)(3,je,6,0)),o&2&&(d(2),C(2,m.data.ids.length>0?2:3))},dependencies:[b,F,V,P,T,O,I],styles:[".caution[_ngcontent-%COMP%]{color:red}.aceptar[_ngcontent-%COMP%]{background-color:red;color:var(--white)}"]});let a=r;return a})();function Be(a,r){if(a&1&&(t(0,"h1"),i(1),e(),t(2,"p"),i(3),H(4,"date"),e(),t(5,"div",3)(6,"div",4)(7,"a",5),i(8,"\u2190 Volver a la p\xE1gina anterior"),e(),t(9,"h2"),i(10,"Descripci\xF3n"),e(),t(11,"p"),i(12),e(),t(13,"h2"),i(14,"Requisitos"),e(),t(15,"p"),i(16),e(),t(17,"h2"),i(18,"Beneficios"),e(),t(19,"p"),i(20),e()(),t(21,"div",6)(22,"mat-card",7)(23,"mat-card-header")(24,"mat-card-title"),i(25,"Detalles"),e()(),t(26,"mat-card-content")(27,"div",8)(28,"p"),i(29,"Categor\xEDa"),e(),t(30,"span"),i(31),e()(),s(32,"br"),t(33,"div",8)(34,"p"),i(35,"Provincia"),e(),t(36,"span"),i(37),e()(),s(38,"br"),t(39,"div",8)(40,"p"),i(41,"Tipo de jornada"),e(),t(42,"span"),i(43),e()(),s(44,"br"),t(45,"div",8)(46,"p"),i(47,"Nivel profesional"),e(),t(48,"span"),i(49),e()(),s(50,"br"),t(51,"div",8)(52,"p"),i(53,"Modalidad"),e(),t(54,"span"),i(55),e()(),s(56,"br"),t(57,"div",8)(58,"p"),i(59,"Salario"),e(),t(60,"span"),i(61),e()()()()()()),a&2){let l=p();d(),u(l.ofertaEmpleo.puesto),d(2),R("Publicada el ",J(4,11,l.ofertaEmpleo.fecha,"longDate"),""),d(9),u(l.ofertaEmpleo.descripcion),d(4),u(l.ofertaEmpleo.requisitos),d(4),u(l.ofertaEmpleo.beneficios),d(11),u(l.ofertaEmpleo.jobcategory),d(6),u(l.ofertaEmpleo.province),d(6),u(l.ofertaEmpleo.jornada),d(6),u(l.ofertaEmpleo.nivel_profesional),d(6),u(l.ofertaEmpleo.modalidad),d(6),u(l.ofertaEmpleo.salario)}}function Ge(a,r){a&1&&(t(0,"p"),i(1,"La oferta de empleo a la que quieres acceder no existe."),e())}function Le(a,r){if(a&1){let l=D();t(0,"app-tablacompleta",9),x("selectionChange",function(o){S(l);let m=p();return M(m.onSelectionChange(o))}),e()}if(a&2){let l=p();q("columns",l.columns)("displayedColumns",l.displayedColumns)("data",l.cvs)("buttons",l.botones)("eliminarSeleccionados",l.openDialogEliminarSeleccionCv.bind(l))}}function Re(a,r){a&1&&(t(0,"p"),i(1,"No hay ning\xFAn CV inscrito a esta oferta de empleo."),e())}Q(Ie,"es");var yt=(()=>{let r=class r{constructor(n,o,m,G){this.title=n,this.empleoService=o,this.activatedroute=m,this.router=G,this.columns=["Nombre","Apellidos","Fecha","Candidatura"],this.displayedColumns=["select",...this.columns,"acciones"],this.selectedIds=[],this.fileEndpoint=ee.DriveDownloadEndpoint,this.botones=[{id:1,nombre:"Editar",class:"",accion:A=>this.openDialogEditarCv(A)},{id:2,nombre:"Ver archivo",class:"",accion:A=>this.abrirCv(A)},{id:2,nombre:"Eliminar",class:"danger",accion:A=>this.openDialogEliminarCv(A)}],this.dialog=L(_e)}ngOnInit(){this.idEmpleo=Number(this.activatedroute.snapshot.paramMap.get("idempleo")),this.idEmpleo&&(this.getOfertayCVs(this.idEmpleo),this.suscripcion=this.empleoService.refresh$.subscribe(()=>{this.getOfertayCVs(this.idEmpleo)}))}getOfertayCVs(n){n&&this.empleoService.getOferta(n).subscribe({next:o=>{this.ofertaEmpleo=o.data,this.title.setTitle(`${this.ofertaEmpleo.puesto} - CVs`),this.empleoService.getCVsPorOferta(this.ofertaEmpleo.id).subscribe({next:m=>{this.cvs=m},error:m=>{console.log(m)}})},error:o=>{console.error(o)}})}openDialogEditarCv(n){this.dialog.open(Fe,{data:{id:n}})}abrirCv(n){this.empleoService.getCv(n).subscribe({next:o=>{window.open(`${this.fileEndpoint}${o.Ruta_cv}`,"_blank")},error:o=>{console.error(o)}})}openDialogEliminarCv(n){this.dialog.open(Ve,{data:{id:n}})}onSelectionChange(n){this.selectedIds=n}openDialogEliminarSeleccionCv(){this.dialog.open(Te,{data:{ids:this.selectedIds}})}};r.\u0275fac=function(o){return new(o||r)(c(X),c(_),c(Y),c(Z))},r.\u0275cmp=h({type:r,selectors:[["app-dashboardempleocvs"]],standalone:!0,features:[z([{provide:K,useValue:"es"}]),E],decls:8,vars:2,consts:[[1,"oferta-empleo"],[1,"cvtable-descripcion"],[3,"columns","displayedColumns","data","buttons","eliminarSeleccionados"],[1,"oferta"],[1,"cuerpo-oferta"],["href","dashboard/empleos"],[1,"detalles-oferta"],["appearance","outlined",1,"detalles-card"],[1,"detalle-item"],[3,"selectionChange","columns","displayedColumns","data","buttons","eliminarSeleccionados"]],template:function(o,m){o&1&&(t(0,"main")(1,"section",0),v(2,Be,62,14)(3,Ge,2,0),t(4,"p",1),i(5,"A continuaci\xF3n, puedes ver los CVs inscritos a esta oferta de empleo:"),e(),v(6,Le,1,5,"app-tablacompleta",2)(7,Re,2,0),e()()),o&2&&(d(2),C(2,m.ofertaEmpleo?2:3),d(4),C(6,m.cvs?6:7))},dependencies:[W,U,ge,ue,ve,Ce,fe,k,N,b,De],styles:[".oferta[_ngcontent-%COMP%]{display:flex;gap:3rem;margin-top:2rem}.cuerpo-oferta[_ngcontent-%COMP%]{width:75%}.cuerpo-oferta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:1rem 0}.detalles-oferta[_ngcontent-%COMP%]{width:25%}.detalles-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin-bottom:1rem}.detalle-item[_ngcontent-%COMP%]{line-height:1rem}.detalle-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}.cvtable-descripcion[_ngcontent-%COMP%]{margin-top:2rem}.encabezado-empleo[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.encabezado-empleo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:var(--darkblue)}.dangerAll[_ngcontent-%COMP%]{margin:0 2rem;background-color:red;color:var(--white)}.productos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2rem}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:1rem}button.danger[_ngcontent-%COMP%]{background-color:red;color:var(--white)}"]});let a=r;return a})();export{yt as DashboardempleocvsComponent};
