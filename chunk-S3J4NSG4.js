import{a as f}from"./chunk-PE3AIABI.js";import{Z as h,a as c,aa as i,b as n,fa as l,i as d,j as u,t as p}from"./chunk-BEZRA2BD.js";var I=(()=>{let t=class t{constructor(r){this._snackBar=r,this.productosCarrito=this.cart||[],this._refresh$=new d,this._productos=new u(this.cart)}get productos(){return this._productos}get refresh$(){return this._refresh$.asObservable()}get cart(){return JSON.parse(localStorage.getItem("cart")||"[]")}get quantity(){return this.productos.pipe(p(r=>r.reduce((o,s)=>Number(o)+Number(s.cantidad),0))).subscribe()}addNewProducto(r,o){let s=this.productosCarrito.findIndex(a=>a.Id===r.Id);if(s>=0)this.productosCarrito[s].cantidad=Number(this.productosCarrito[s].cantidad)+Number(o),console.log("carrito:",this.productosCarrito);else{let a=n(c({},r),{cantidad:o});this.productosCarrito.push(a)}localStorage.setItem("cart",JSON.stringify(this.productosCarrito)),this._productos.next(this.productosCarrito),this._snackBar.open("Producto a\xF1adido al carrito.","Ver carrito",{duration:3e3}).onAction().pipe(h(()=>{this._refresh$.next()})).subscribe()}deleteProducto(r){this.productosCarrito.splice(r,1),localStorage.setItem("cart",JSON.stringify(this.productosCarrito)),this._productos.next(this.productosCarrito)}deleteCarrito(){localStorage.setItem("cart","[]"),this.productosCarrito=[],this._productos.next(this.productosCarrito)}};t.\u0275fac=function(o){return new(o||t)(l(f))},t.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var N=(()=>{let t=class t{setSidenav(r){this.sidenav=r}open(){return this.sidenav.open()}close(){return this.sidenav.close()}toggle(){this.sidenav.toggle()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{N as a,I as b};
