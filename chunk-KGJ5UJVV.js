import{a as Y}from"./chunk-NACPSX2R.js";import"./chunk-XXN7YHGW.js";import"./chunk-42JTQIQS.js";import"./chunk-BJKW2MZI.js";import"./chunk-5V7AZGGS.js";import"./chunk-JI4B56LL.js";import"./chunk-Y4ZCGVAW.js";import{c as K,d as Q}from"./chunk-3TBXM6QS.js";import{a as $,g as H,h as J}from"./chunk-7ITRIRQH.js";import{a as A}from"./chunk-UIFHNKPJ.js";import{a as U}from"./chunk-PE3AIABI.js";import{c as W,h as X}from"./chunk-SMOEXM7I.js";import{b as V,d as p,f as y,g as T,h as O,j as C,k as P,m as B,n as G,s as R,t as j,u as q}from"./chunk-33HZCSPU.js";import{b as k}from"./chunk-V6CHNUWL.js";import{o as L,q as z}from"./chunk-UKCT2NNU.js";import"./chunk-AESYL7IM.js";import"./chunk-YRYHB4P2.js";import"./chunk-I7KWM6MY.js";import{i as w,k as N}from"./chunk-X2X7HICG.js";import{Ab as n,Bb as i,Cb as s,Gb as D,Jb as x,Lb as l,Va as E,Vb as m,Xb as M,Ya as c,Za as d,cc as F,ga as v,ib as I,la as S,ob as u,qb as b,ua as f,va as _,vb as g}from"./chunk-BEZRA2BD.js";function ee(t,r){if(t&1&&(n(0,"span"),m(1),i()),t&2){let a=l(2);c(),M(" Imagen: ",a.imagenElegida.nombre,"")}}function te(t,r){if(t&1&&(n(0,"h3"),m(1,"\xC9sta es la imagen asignada actualmente:"),i(),n(2,"p"),m(3),i(),s(4,"img",8)),t&2){let a=l(2);c(3),M("Nombre de la imagen: ",a.marca.Imagen[0].Nombre_imagen,""),c(),b("src",a.FileEndpoint+a.marca.Imagen[0].Ruta_archivo,E)("alt",a.marca.Imagen[0].Alt)}}function ie(t,r){t&1&&(n(0,"p"),m(1,"La categor\xEDa no tiene una imagen asignada."),i())}function ae(t,r){if(t&1){let a=D();n(0,"div",2)(1,"form",3)(2,"mat-form-field",4)(3,"mat-label"),m(4,"Nombre"),i(),s(5,"input",5),i(),n(6,"button",6),x("click",function(){f(a);let e=l();return _(e.openDialogSeleccionarImagen())}),m(7,"Seleccionar imagen"),i(),u(8,ee,2,1,"span"),s(9,"br")(10,"br"),n(11,"button",7),x("click",function(){f(a);let e=l();return _(e.editarMarca())}),m(12,"Guardar"),i()()(),n(13,"div",2),u(14,te,5,3)(15,ie,2,0),i()}if(t&2){let a=l();c(),b("formGroup",a.editarMarcaForm),c(7),g(8,a.imagenSeleccionada()?8:-1),c(6),g(14,a.marca.Imagen[0]?14:15)}}function ne(t,r){t&1&&(n(0,"p"),m(1,"La categor\xEDa a la que intentas acceder no existe."),i())}var Se=(()=>{let r=class r{constructor(o,e,h,Z){this.productoService=o,this.router=e,this.title=h,this._snackBar=Z,this.FileEndpoint=N.DriveEndpoint,this.editarMarcaForm=new O({nombre:new C("",p.required),imagen_id:new C(0,p.compose([p.required,p.minLength(1)]))}),this.dialog=v(W),this.imagenSeleccionada=I("")}ngOnInit(){this.title.setTitle("Editar Marca < EasyShop"),this.idMarca=this.router.snapshot.params.idmarca,this.getMarca(this.idMarca),this.suscripcion=this.productoService.refresh$.subscribe(()=>{this.getMarca(this.idMarca)})}ngOnDestroy(){this.suscripcion.unsubscribe()}getMarca(o){this.productoService.getMarca(o).subscribe({next:e=>{this.marca=e,e.Imagen.length>0?(this.editarMarcaForm.patchValue({nombre:this.marca.Nombre,imagen_id:this.marca.Imagen[0].Id??0}),this.imagenElegida={id:this.marca.Imagen[0].Id,nombre:this.marca.Imagen[0].Nombre_imagen}):this.editarMarcaForm.patchValue({nombre:this.marca.Nombre})},error:e=>{console.error(e)}})}editarMarca(){this.productoService.updateBrand(this.idMarca,this.editarMarcaForm.value).subscribe({next:o=>{this._snackBar.open("Marca editada.","Aceptar",{duration:3e3})},error:o=>{this._snackBar.open(o.error.result,"Aceptar",{duration:3e3})}})}openDialogSeleccionarImagen(){this.dialog.open(Y,{data:{imagenSeleccionada:{id:null,nombre:""}}}).afterClosed().subscribe(e=>{e!==void 0&&(this.imagenSeleccionada.set(e),this.imagenElegida=e,this.editarMarcaForm.patchValue({imagen_id:this.imagenElegida.id}))})}};r.\u0275fac=function(e){return new(e||r)(d(A),d(k),d(w),d(U))},r.\u0275cmp=S({type:r,selectors:[["app-dashboardeditarmarca"]],standalone:!0,features:[F],decls:11,vars:1,consts:[["href","dashboard/marcas"],[1,"data"],[1,"column-data"],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["matInput","","placeholder","Nombre de la marca","formControlName","nombre","ngDefaultControl","","required",""],["mat-flat-button","",1,"select-image",3,"click"],["mat-stroked-button","","type","submit",3,"click"],[3,"src","alt"]],template:function(e,h){e&1&&(n(0,"main")(1,"section")(2,"h1"),m(3,"Editar marca"),i(),n(4,"a",0),m(5,"\u2190 Volver a la p\xE1gina anterior"),i()(),s(6,"br")(7,"br"),n(8,"section",1),u(9,ae,16,3)(10,ne,2,0),i()()),e&2&&(c(9),g(9,h.marca?9:10))},dependencies:[z,L,J,H,$,Q,K,X,q,P,V,y,T,R,B,G,j],styles:[".data[_ngcontent-%COMP%]{display:flex;gap:2rem}.column-data[_ngcontent-%COMP%]{width:50%}.column-data[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:400px}.example-form[_ngcontent-%COMP%]{min-width:150px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.select-image[_ngcontent-%COMP%]{background-color:var(--darkblue);color:var(--white)}"]});let t=r;return t})();export{Se as DashboardeditarmarcaComponent};
