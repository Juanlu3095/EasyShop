import{a as de}from"./chunk-4MKVII7L.js";import"./chunk-YUTX5S43.js";import"./chunk-2Z2WP37M.js";import"./chunk-BJKW2MZI.js";import"./chunk-5V7AZGGS.js";import{a as ae,b as re}from"./chunk-JI4B56LL.js";import"./chunk-Y4ZCGVAW.js";import{a as ee,c as te,d as ie}from"./chunk-3TBXM6QS.js";import{a as X,g as Y,h as Z}from"./chunk-7ITRIRQH.js";import{a as K}from"./chunk-VFELF6FW.js";import{a as W}from"./chunk-PE3AIABI.js";import{c as oe,h as ne}from"./chunk-SMOEXM7I.js";import{b as q,d as c,f as A,g as V,h as R,j as r,k as j,l as B,m as G,n as $,s as L,t as U,u as H}from"./chunk-33HZCSPU.js";import{d as O}from"./chunk-WR2FAY7X.js";import{o as J,q as Q}from"./chunk-UKCT2NNU.js";import"./chunk-AESYL7IM.js";import"./chunk-YRYHB4P2.js";import{Z as T}from"./chunk-I7KWM6MY.js";import{i as N,k as z}from"./chunk-XXO6A46Z.js";import{Ab as t,Bb as e,Cb as m,Gb as k,Jb as S,Lb as b,Ob as D,Va as P,Vb as i,Wb as w,Ya as u,Za as s,cc as F,ga as E,ib as I,la as y,ob as f,qb as x,ua as _,va as v,vb as h,yb as C,zb as M}from"./chunk-BEZRA2BD.js";var me=(o,a)=>a.Id;function ce(o,a){if(o&1&&m(0,"img",24),o&2){let d=b();D("src",d.archivoEndpoint+d.imagenElegida.ruta,P)}}function pe(o,a){if(o&1&&(t(0,"mat-option",28),i(1),e()),o&2){let d=a.$implicit;x("value",d.Id),u(),w(d.Nombre)}}function ue(o,a){if(o&1&&C(0,pe,2,2,"mat-option",28,me),o&2){let d=b();M(d.categorias)}}function se(o,a){if(o&1&&(t(0,"mat-option",28),i(1),e()),o&2){let d=a.$implicit;x("value",d.Id),u(),w(d.Nombre)}}function ge(o,a){if(o&1&&C(0,se,2,2,"mat-option",28,me),o&2){let d=b();M(d.marcas)}}var Ae=(()=>{let a=class a{constructor(n,l,p,g){this.title=n,this.productService=l,this._snackBar=p,this.router=g,this.archivoEndpoint=z.DriveEndpoint,this.nuevoproductoForm=new R({nombre:new r("",c.required),descripcion:new r("",c.required),precio:new r(0,c.required),precio_rebajado:new r(null),sku:new r(""),isbn_ean:new r(""),inventario:new r(null),descripcion_corta:new r("",c.required),estado:new r("",c.required),imagen_id:new r(0,c.compose([c.minLength(1)])),categoria_id:new r(null,c.required),marca_id:new r(null)}),this.dialog=E(oe),this.imagenSeleccionada=I("")}ngOnInit(){this.title.setTitle("Nuevo producto < EasyShop"),this.getCategorias(),this.getMarcas()}openDialogSeleccionarImagen(){this.dialog.open(de,{data:{imagenSeleccionada:{id:null,nombre:"",ruta:""}}}).afterClosed().subscribe(l=>{l!==void 0&&(this.imagenSeleccionada.set(l),this.imagenElegida=l,console.log(l),this.nuevoproductoForm.patchValue({imagen_id:this.imagenElegida.id}))})}crearProducto(){this.nuevoproductoForm.valid?this.productService.postProducto(this.nuevoproductoForm.value).subscribe({next:n=>{console.log(n),this._snackBar.open("Producto creado.","Aceptar",{duration:3e3}),this.router.navigate(["dashboard/productos/",n.data])},error:n=>{console.error(n),this._snackBar.open("Ha ocurrido un error.","Aceptar",{duration:3e3})}}):console.error("Form no v\xE1lido")}getMarcas(){this.productService.getMarcas().subscribe({next:n=>{console.log(n),this.marcas=n},error:n=>{console.error(n)}})}getCategorias(){this.productService.getCategorias().subscribe({next:n=>{console.log(n.data),this.categorias=n.data},error:n=>{console.error(n)}})}};a.\u0275fac=function(l){return new(l||a)(s(N),s(K),s(W),s(O))},a.\u0275cmp=y({type:a,selectors:[["app-dashboardproductsnuevo"]],standalone:!0,features:[F],decls:88,vars:4,consts:[["autosize","cdkTextareaAutosize"],[1,"encabezado-productonuevo"],["href","dashboard/productos"],[3,"formGroup"],[1,"product-data"],[1,"product-data-izq"],[1,"input-border"],[1,"example-full-width"],["matInput","","type","text","formControlName","nombre"],["matInput","","formControlName","descripcion","cdkTextareaAutosize","","cdkAutosizeMinRows","10","cdkAutosizeMaxRows","10"],[1,"input-group-flex"],["matInput","","type","number","formControlName","precio"],["matInput","","type","number","formControlName","precio_rebajado"],["matInput","","type","text","formControlName","sku"],["matInput","","type","text","formControlName","isbn_ean"],["matInput","","type","number","formControlName","inventario"],["matInput","","formControlName","descripcion_corta","cdkTextareaAutosize","","cdkAutosizeMinRows","5","cdkAutosizeMaxRows","10"],[1,"product-data-dcha"],["required","","formControlName","estado","ngDefaultControl",""],["value","publicada"],["value","borrador"],[1,"guardar"],["mat-flat-button","","type","submit",3,"click"],[1,"image-container"],[1,"imagenSeleccionada",3,"src"],["mat-flat-button","",1,"select-image",3,"click"],["required","","formControlName","categoria_id","ngDefaultControl",""],["required","","formControlName","marca_id","ngDefaultControl",""],[3,"value"]],template:function(l,p){if(l&1){let g=k();t(0,"main")(1,"section",1)(2,"h1"),i(3,"A\xF1adir producto"),e(),t(4,"a",2),i(5,"\u2190 Volver a la p\xE1gina anterior"),e()(),m(6,"br")(7,"br"),t(8,"form",3)(9,"div",4)(10,"section",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),i(14,"Nombre del producto"),e(),m(15,"input",8),e()(),t(16,"div",6)(17,"mat-form-field",7)(18,"mat-label"),i(19,"Descripci\xF3n del producto"),e(),m(20,"textarea",9,0),e()(),t(22,"div",6)(23,"h2"),i(24,"Datos del producto"),e(),t(25,"div",10)(26,"mat-form-field",7)(27,"mat-label"),i(28,"Precio"),e(),m(29,"input",11),e(),t(30,"mat-form-field",7)(31,"mat-label"),i(32,"Precio rebajado (si procede)"),e(),m(33,"input",12),e()(),t(34,"div",10)(35,"mat-form-field",7)(36,"mat-label"),i(37,"SKU"),e(),m(38,"input",13),e(),t(39,"mat-form-field",7)(40,"mat-label"),i(41,"ISBN/EAN"),e(),m(42,"input",14),e()(),t(43,"mat-form-field",7)(44,"mat-label"),i(45,"Inventario"),e(),m(46,"input",15),e()(),t(47,"div",6)(48,"mat-form-field",7)(49,"mat-label"),i(50,"Descripci\xF3n corta del producto"),e(),m(51,"textarea",16,0),e()()(),t(53,"aside",17)(54,"div",6)(55,"div")(56,"mat-form-field",7)(57,"mat-label"),i(58,"Estado del producto"),e(),t(59,"mat-select",18)(60,"mat-option",19),i(61,"Publicada"),e(),t(62,"mat-option",20),i(63,"Borrador"),e()()()(),t(64,"div",21)(65,"button",22),S("click",function(){return _(g),v(p.crearProducto())}),i(66,"Guardar"),e()()(),t(67,"div",6)(68,"h2"),i(69,"Imagen del producto"),e(),t(70,"div",23),f(71,ce,1,1,"img",24),m(72,"br"),t(73,"button",25),S("click",function(){return _(g),v(p.openDialogSeleccionarImagen())}),i(74,"Seleccionar imagen"),e()()(),t(75,"div",6)(76,"h2"),i(77,"Categor\xEDa y marca"),e(),t(78,"mat-form-field",7)(79,"mat-label"),i(80,"Categor\xEDa"),e(),t(81,"mat-select",26),f(82,ue,2,0),e()(),t(83,"mat-form-field",7)(84,"mat-label"),i(85,"Marca"),e(),t(86,"mat-select",27),f(87,ge,2,0),e()()()()()()()}l&2&&(u(8),x("formGroup",p.nuevoproductoForm),u(63),h(71,p.imagenSeleccionada()?71:-1),u(11),h(82,p.categorias?82:-1),u(5),h(87,p.marcas?87:-1))},dependencies:[Q,J,Z,Y,X,ie,te,ee,ne,re,ae,T,H,j,q,B,A,V,L,G,$,U],styles:[".product-data[_ngcontent-%COMP%]{display:flex;width:100%;gap:2rem}@media only screen and (max-width: 767px){.product-data[_ngcontent-%COMP%]{flex-direction:column}}.product-data-izq[_ngcontent-%COMP%]{width:70%}@media only screen and (min-width: 767px) and (max-width: 1023px){.product-data-izq[_ngcontent-%COMP%]{width:60%}}@media only screen and (max-width: 767px){.product-data-izq[_ngcontent-%COMP%]{width:100%}}.product-data-dcha[_ngcontent-%COMP%]{width:30%}@media only screen and (min-width: 767px) and (max-width: 1023px){.product-data-dcha[_ngcontent-%COMP%]{width:40%}}@media only screen and (max-width: 767px){.product-data-dcha[_ngcontent-%COMP%]{width:100%}}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.card-precios[_ngcontent-%COMP%]{display:flex;gap:2rem}.input-border[_ngcontent-%COMP%]{padding:1rem 1rem 0;margin-bottom:1rem;border:1px solid lightgray;background-color:#fff}.input-border-flex[_ngcontent-%COMP%]{padding:1rem 1rem 0;margin-bottom:1rem;display:flex;gap:1rem;background-color:#fff;border:1px solid lightgray}.input-group-flex[_ngcontent-%COMP%]{display:flex;gap:1rem}.guardar[_ngcontent-%COMP%]{text-align:right;padding-bottom:1rem}.guardar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--darkblue);color:var(--white)}.image-container[_ngcontent-%COMP%]{padding-bottom:1rem;text-align:center}.imagenSeleccionada[_ngcontent-%COMP%]{padding:1rem;max-width:250px}"]});let o=a;return o})();export{Ae as DashboardproductsnuevoComponent};
