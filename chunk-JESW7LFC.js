import{a as gt}from"./chunk-34JUEJJQ.js";import{a as K,b as Q,c as W,e as X,f as Y,h as Z}from"./chunk-7VRA7NH3.js";import{d as et}from"./chunk-3TBXM6QS.js";import{h as tt}from"./chunk-7ITRIRQH.js";import{a as q,b as G}from"./chunk-XTN53JEY.js";import"./chunk-UIFHNKPJ.js";import{b as J}from"./chunk-S3J4NSG4.js";import"./chunk-PE3AIABI.js";import{a as Ct,b as ut}from"./chunk-RD4WVGQA.js";import{b as A,c as $}from"./chunk-OB62TPC4.js";import"./chunk-AKCFMZTD.js";import{u as z}from"./chunk-33HZCSPU.js";import{e as L}from"./chunk-V6CHNUWL.js";import{o as B,q as U}from"./chunk-UKCT2NNU.js";import"./chunk-AESYL7IM.js";import{a as nt,b as it,c as ot,d as at,e as rt,f as ct,g as lt,h as mt,i as dt,j as pt,l as st,m as _t}from"./chunk-YRYHB4P2.js";import"./chunk-I7KWM6MY.js";import{i as H,k as N}from"./chunk-X2X7HICG.js";import{Ab as o,Bb as i,Cb as p,Db as s,Dc as R,Eb as _,Gb as P,Jb as x,Lb as C,Lc as j,Mc as V,Ob as w,Pb as T,Va as y,Vb as a,Wb as v,Xb as u,Ya as m,Za as M,bc as k,cc as I,gc as S,ic as O,la as D,ob as d,pc as F,qb as h,t as E,ua as g,va as f,vb as b}from"./chunk-BEZRA2BD.js";function ft(t,n){t&1&&(o(0,"th",16),a(1," Imagen "),i())}function ht(t,n){if(t&1&&(o(0,"td",17),p(1,"img",18),i()),t&2){let e=n.$implicit,r=C(2);m(),w("src",r.endPointFiles+e.Imagen[0].Ruta_archivo,y),w("alt",e.Imagen[0].Alt)}}function xt(t,n){t&1&&(o(0,"th",16),a(1," Producto "),i())}function Mt(t,n){if(t&1&&(o(0,"td",19)(1,"span",20),a(2),i()()),t&2){let e=n.$implicit;m(),T("routerLink","/producto/",e.Id,""),m(),u(" ",e.Nombre," ")}}function bt(t,n){t&1&&(o(0,"th",16),a(1," Precio(\u20AC) "),i())}function Pt(t,n){if(t&1&&(o(0,"td",19),a(1),i()),t&2){let e=n.$implicit;m(),u(" ",e.Precio_rebajado_euros?e.Precio_rebajado_euros:e.Precio_euros," ")}}function wt(t,n){t&1&&(o(0,"th",16),a(1," Cantidad "),i())}function vt(t,n){if(t&1){let e=P();o(0,"td",21)(1,"button",22),x("click",function(){let c=g(e).index,l=C(2);return f(l.dismimuirCantidad(c))}),a(2,"-"),i(),o(3,"span",23),a(4),i(),o(5,"button",24),x("click",function(){let c=g(e).index,l=C(2);return f(l.aumentarCantidad(c))}),a(6,"+"),i()()}if(t&2){let e=n.$implicit;m(4),v(e.cantidad)}}function St(t,n){t&1&&(o(0,"th",16),a(1," Subtotal(\u20AC) "),i())}function Ot(t,n){if(t&1&&(o(0,"td",19),a(1),i()),t&2){let e=n.$implicit;m(),u(" ",e.Precio_rebajado_euros?(e.Precio_rebajado_euros*e.cantidad).toFixed(2):(e.Precio_euros*e.cantidad).toFixed(2)," ")}}function Et(t,n){t&1&&(o(0,"th",16),a(1," Acciones "),i())}function Dt(t,n){if(t&1){let e=P();o(0,"td",19)(1,"mat-icon",25),x("click",function(){let c=g(e).index,l=C(2);return f(l.deleteProduct(c))}),a(2,"delete"),i()()}}function yt(t,n){t&1&&p(0,"tr",26)}function Tt(t,n){t&1&&p(0,"tr",27)}function kt(t,n){if(t&1&&(o(0,"div",1)(1,"table",3),s(2,4),d(3,ft,2,0,"th",5)(4,ht,2,2,"td",6),_(),s(5,7),d(6,xt,2,0,"th",5)(7,Mt,3,3,"td",8),_(),s(8,9),d(9,bt,2,0,"th",5)(10,Pt,2,1,"td",8),_(),s(11,10),d(12,wt,2,0,"th",5)(13,vt,7,1,"td",11),_(),s(14,12),d(15,St,2,0,"th",5)(16,Ot,2,1,"td",8),_(),s(17,13),d(18,Et,2,0,"th",5)(19,Dt,3,0,"td",8),_(),d(20,yt,1,0,"tr",14)(21,Tt,1,0,"tr",15),i()()),t&2){let e=C();m(),h("dataSource",e.dataSource.filteredData),m(19),h("matHeaderRowDef",e.displayedColumns),m(),h("matRowDefColumns",e.displayedColumns)}}function It(t,n){t&1&&(o(0,"h3"),a(1,"No hay productos en el carrito."),i())}function Ft(t,n){if(t&1&&(o(0,"section",2)(1,"div",28)(2,"mat-card",29)(3,"mat-card-header")(4,"mat-card-title"),a(5,"Total del carrito"),i()(),o(6,"mat-card-content")(7,"div",30)(8,"p",31),a(9,"Subtotal"),i(),o(10,"p"),a(11),S(12,"currency"),i()(),p(13,"mat-divider"),o(14,"div",30)(15,"p",31),a(16,"Total"),i(),o(17,"p"),a(18),S(19,"currency"),i()(),p(20,"mat-divider"),i(),o(21,"mat-card-footer",32)(22,"button",33),a(23,"Finalizar compra"),i()()()()()),t&2){let e=C();m(11),v(O(12,2,e.subtotal,"EUR")),m(7),u("",O(19,5,e.subtotal,"EUR")," (incluye IVA)")}}R(gt,"es");var re=(()=>{let n=class n{constructor(r,c){this.title=r,this.carrito=c,this.displayedColumns=["imagen","nombre","precio","cantidad","subtotal","acciones"],this.endPointFiles=N.DriveEndpoint,this.suscripcion=[]}ngOnInit(){this.title.setTitle("Carrito | EasyShop"),this.getCarrito(),this.getSubtotal(),this.suscripcion.push(this.carrito.productos.subscribe(()=>{this.getCarrito()}))}ngOnDestroy(){this.suscripcion.forEach(r=>r.unsubscribe())}aumentarCantidad(r){this.cart=this.carrito.cart,this.cart[r].cantidad++,localStorage.setItem("cart",JSON.stringify(this.cart)),this.carrito.productos.next(this.cart)}dismimuirCantidad(r){this.cart=this.carrito.cart,this.cart[r].cantidad>1&&this.cart[r].cantidad--,localStorage.setItem("cart",JSON.stringify(this.cart)),this.carrito.productos.next(this.cart)}deleteProduct(r){this.carrito.deleteProducto(r)}getCarrito(){this.dataSource=new _t(this.carrito.cart)}getSubtotal(){this.suscripcion.push(this.carrito.productos.pipe(E(r=>r.reduce((c,l)=>Number(c)+Number(l.Precio_rebajado_euros?l.Precio_rebajado_euros*l.cantidad:l.Precio_euros*l.cantidad),0))).subscribe(r=>{this.subtotal=Number(r.toFixed(2))}))}};n.\u0275fac=function(c){return new(c||n)(M(H),M(J))},n.\u0275cmp=D({type:n,selectors:[["app-carritopage"]],standalone:!0,features:[k([{provide:F,useValue:"es"}]),I],decls:9,vars:2,consts:[[1,"carrito"],[1,"table-responsive"],[1,"total-carrito"],["mat-table","",3,"dataSource"],["matColumnDef","imagen","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","imagenproducto",4,"matCellDef"],["matColumnDef","nombre"],["mat-cell","",4,"matCellDef"],["matColumnDef","precio"],["matColumnDef","cantidad"],["mat-cell","","class","td-cantidad",4,"matCellDef"],["matColumnDef","subtotal"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"imagenproducto"],[3,"src","alt"],["mat-cell",""],[1,"nombreProducto",3,"routerLink"],["mat-cell","",1,"td-cantidad"],[1,"btn","btn-outline-minus",3,"click"],[1,"row-cantidad"],[1,"btn","btn-outline-plus",3,"click"],[1,"danger",3,"click"],["mat-header-row",""],["mat-row",""],[1,"total-container"],[1,"total-card"],[1,"content-item"],[1,"content-item-title"],[1,"example-card-footer"],["mat-flat-button","","routerLink","/finalizar-compra"]],template:function(c,l){c&1&&(p(0,"app-header"),o(1,"main")(2,"section",0)(3,"h1"),a(4,"Carrito"),i(),d(5,kt,22,3,"div",1)(6,It,2,0),i(),d(7,Ft,24,8,"section",2),i(),p(8,"app-footer")),c&2&&(m(5),b(5,l.dataSource.filteredData.length>0?5:6),m(2),b(7,l.dataSource.filteredData.length>0?7:-1))},dependencies:[q,G,st,nt,ot,lt,at,it,mt,rt,ct,dt,pt,$,A,U,B,Z,K,W,Y,X,Q,ut,Ct,et,tt,L,V,j,z],styles:[".carrito[_ngcontent-%COMP%]{text-align:center;margin:5rem}.carrito[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:3rem;font-size:var(--lengthMd3);font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--lightgray)}th[_ngcontent-%COMP%]{background-color:var(--darkblue)!important;color:var(--white)}.imagenproducto[_ngcontent-%COMP%]{width:10%;padding:1rem}.imagenproducto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40%}.nombreProducto[_ngcontent-%COMP%]{cursor:pointer}.td-cantidad[_ngcontent-%COMP%]{width:25%}.row-cantidad[_ngcontent-%COMP%]{margin:0 1rem}.btn-outline-minus[_ngcontent-%COMP%]{border-color:red}.btn-outline-minus[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}.btn-outline-plus[_ngcontent-%COMP%]{border-color:var(--darkblue)}.btn-outline-plus[_ngcontent-%COMP%]:hover{background-color:var(--darkblue);color:#fff}.danger[_ngcontent-%COMP%]{color:red}.danger[_ngcontent-%COMP%]:hover{cursor:pointer}.total-carrito[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;padding:0 5rem;margin-bottom:5rem}.total-container[_ngcontent-%COMP%]{width:50%}.total-card[_ngcontent-%COMP%]{padding:1rem}.total-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin-bottom:2rem}.content-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin:.5rem 0}.content-item-title[_ngcontent-%COMP%]{font-weight:700}.example-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90%;margin:2rem 2rem 1rem;text-align:center;color:var(--white);background-color:var(--darkblue)}@media only screen and (min-width: 768px) and (max-width: 1023px){.carrito[_ngcontent-%COMP%]{margin:2rem}.imagenproducto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.total-carrito[_ngcontent-%COMP%]{padding:0 2rem}.example-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%}}@media only screen and (max-width: 767px){.carrito[_ngcontent-%COMP%]{margin:2rem}.imagenproducto[_ngcontent-%COMP%], .imagenproducto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.total-carrito[_ngcontent-%COMP%]{padding:0 2rem}.total-container[_ngcontent-%COMP%]{width:100%}.example-card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%}}"]});let t=n;return t})();export{re as CarritopageComponent};
